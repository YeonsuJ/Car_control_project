# 🧾 Embedded Git Versioning Guide with CubeIDE

STM32 기반 임베디드 프로젝트를 GitHub와 CubeIDE를 연동하여 버전 관리할 때 고려해야 할 구조와 정책 정리

---

## 🧠 왜 GitHub에서 프로젝트 단위로 버전 관리를 하는가?

- **MCU별로 프로젝트가 명확히 분리되기 때문**  
  STM32 프로젝트는 MCU 종류 및 핀 설정에 따라 디렉토리 구조와 코드가 독립적으로 구성됨  
  → *기능별 서브 디렉토리보다, 프로젝트 자체가 하나의 독립 단위로 취급되어야 함*

- **파일 시스템 스냅샷이 아닌 시분할 변경 이력 관리가 가능**  
  Git은 특정 시점에서의 파일 상태를 단순히 저장하는 것이 아니라,  
  *변경의 흐름(history)을 시간 축 상에서 관리하는 시분할 기반 관리 체계*

- **원격 저장소(GitHub)가 메인 저장소이며, 로컬은 캐시 혹은 복사본**  
  원격 저장소를 기준으로 버전 정합성을 유지해야 하며,  
  CubeIDE에서의 작업은 반드시 커밋 후 푸시(push)하여 GitHub에 반영

---

## 🏷️ 태그(Tag)와 커밋(Commit)의 사용 전략

### ✅ 태그는 언제 붙이는가?

- **모듈 단위 테스트 후 → 태그 없이 커밋만 수행**
- **여러 모듈을 통합하여 안정화가 완료된 시점 → 태그 부여**
- **예외 상황: RTOS 통합, 시스템 구조 변경 등 큰 변경이 있을 때도 태그 적용**

### ✅ 태그 네이밍 규칙

- **시맨틱 버전 형식 사용: `vMajor.Minor.Patch`**
  - `v1.0.0` → 첫 번째 전체 통합 및 안정화 버전
  - `v1.1.0` → 주요 로직 추가 (ex. 외부 인터럽트 기능 추가)
  - `v2.0.0` → 구조적으로 큰 변화 (ex. FreeRTOS 도입 및 병합)

### ✅ 예시 흐름

| 작업 단계            | Git 사용 방식                  | 비고                           |
|---------------------|-------------------------------|--------------------------------|
| 모듈별 단위 개발     | 커밋만 사용                    | 기능 확인 시점마다 저장        |
| ioc 통합 완료        | 태그: `v1.0.0` 부여            | 코드 안정화, 전체 빌드 가능    |
| RTOS 도입            | 태그: `v2.0.0` 부여            | 구조 변경, 병합 완료           |
| 이후 기능 개선       | 커밋 또는 `v2.1.0`, `v2.1.1`   | 변경 규모에 따라 결정          |

---

## 🛠️ CubeIDE에서 태그 등록/삭제 후 push 방법
1. CubeIDE에서 변경 사항을 커밋 및 Push
2. Git Bash에서 다음 명령 실행

### 태그 생성
ex) sensor

```bash
// 1. 원하는 브랜치로 이동
git checkout Unit_car_status 

// 2. 로컬에 태그 생성
git tag -a sensor_v1.5.0 -m "car_status 통합 완료"

// 3. 원격으로 push 반영
git push origin sensor_v1.5.0
```
- `-a` : annotated tag (메세지 포함, 사용자 이름/날짜 저장됨)
- `-m` : 메세지 작성
- 해당 태그는 sensor_v1.5.0이라는 버전으로 GitHub 저장소에 명확히 표시되며,
이후 버그 수정 또는 확장 개발 시 기준점으로 활용 가능함

### 태그제거
ex) sensor
```bash
// 1. 원하는 브랜치 이동
git checkout Unit_car_sensor

// 2. 로컬의 태그 제거 (달았던 태그명 그대로)
git tag -d sensor_v1.0.0

// 3. 원격으로 push 반영
git push origin :refs/tags/sensor_v1.0.0
```

---

## 📁 Git vs 파일 시스템의 버전 관리 차이

| 항목                   | Git 버전 관리                       | 일반 파일 백업                      |
|------------------------|--------------------------------------|-------------------------------------|
| 저장 방식              | 변경 이력 기반, 시분할 스냅샷        | 단순 복사본                         |
| 협업                   | 브랜치 및 태그 기반 분기 협업        | 수동 파일 공유                      |
| 태그/커밋 이력 관리    | 정밀 추적 및 복구 가능                | 시점 구분 어려움                    |
| CubeIDE 연동           | `.git`과 `.project` 연계하여 구조 유지 | IDE 자체 백업 기능과는 별개         |

---

## 📁 프로젝트 구조

```
Unit_controller/
├── Inc/
├── Src/
├── feature/
│   ├── button/
│   ├── gyro/
│   ├── dc_motor/
│   └── lcd_display/
├── main.c
└── README.md
```
> 한 브렌치 당 한 프로젝트 파일로 관리, 커밋으로 이력 추적  
> 하나의 유닛 (mcu) 에 개발 흐름을 분기할 수 있는 효율적인 구조

---
## 모듈 테스트 히스토리

| 커밋해시값 | 날짜         | 변경 내용 |
|----------|--------------|-----------|
| [`82d4624`](https://github.com/YeonsuJ/Car_control_project/commit/82d462479a9bef4ad92decd2cc37d7a1186b770f) | 2025-05-19     | - 버튼 입력 처리<br>- DC 모터 정/역 제어 |
| [`2cbdb42`](https://github.com/YeonsuJ/Car_control_project/commit/2cbdb42c721dd69e062f97b6757ff0f06227f0a2) | 2025-06-02    | - 자이로 센서 기능 추가<br>- 자이로 기반 방향 제어 |


---
## 🕓 버전 히스토리

| 버전   | 날짜         | 변경 내용 |
|--------|--------------|-----------|
| v1.0.0 | 2025-05-19   | - 버튼 입력 처리<br>- DC 모터 정/역 제어 |
| v1.1.0 | 2025-06-02   | - 자이로 센서 기능 추가<br>- 자이로 기반 방향 제어 |
| v1.2.0 | 2025-06-10   | - OLED 출력 기능 추가<br>- 상태 정보 출력 |
| v2.0.0 | 예정         | - RTOS 도입 및 구조 개편<br>- 모듈 분리 및 스케줄링 기능 추가 예정 |

> 태그는 통합 완료된 버전만 명시적으로 관리하며, 중간 모듈 개발은 커밋 기반으로 추적

---

# 타이머 인터럽트 기반 스위치 눌림 시간 측정 문제
## 개요
- 스위치 입력은 외부 인터럽트(EXTI) 를 통해 감지되며, 20ms 주기의 타이머 인터럽트를 활용해 눌림 시간을 측정하는 구조

- 타이머 설정은 기존 서보모터 제어용 분주비 및 프리스케일러 설정과 동일하게 구성되어 있으며, 눌림 상태를 조건문으로 판별

- 현재 전체 로직 구현이 거의 완료된 상태이며, 정확도 향상을 위한 디바운싱 처리 및 배선 수정 작업을 수행한 이후 문제 상황이 발생

2. 문제 상황
## 문제 상황
1. 정확도 향상을 목적으로 디바운싱 코드 병합 및 배선 수정 진행

2. 이후 OLED 디스플레이가 출력되지 않는 현상 발생

3. MCU의 GND 라인이 브레드보드에 연결되지 않은 상태였던 것으로 확인

4. 배선 재정비 후 센서 개별 테스트를 수행, 각 센서는 정상 동작하며 MCU 또한 손상되지 않음을 확인

5. 동일한 완성 코드(디바운싱 미적용 버전)로 재테스트 시, 버튼 눌림 감지 정확도가 현저히 저하됨

## 문제 원인 추정
- 문제가 단일 요인이 아닌 복합적인 요인으로 발생했을 가능성이 높음

- 배선 오류(GND 미연결 등)로 인해 회로 신뢰성이 전반적으로 크게 저하됨

- 스위치 입력 감지 정확도 하락의 근본 원인은 외부 인터럽트 신뢰도 저하

- 현재 스위치 입력 핀은 MCU 내부 풀업 저항을 사용 중이며, 이 방식은 외부 노이즈에 상대적으로 취약함

- 실제로 점프선에 물리적 충격을 가할 경우 외부 인터럽트 핸들러가 오작동함

- 외부 저항이 부착된 상용 스위치 모듈 도입도 고려하였으나, 일단 보류함

- 소프트웨어적으로 디바운싱 처리 코드 적용 후의 동작도 검토 필요

- 필요 시 하드웨어 디바운싱(저용량 커패시터 병렬 연결) 도 병행 적용 검토

## 향후 계획
- 외부 인터럽트 핀 개별 테스트를 통해 입력 신뢰성 확보

- 소프트웨어 디바운싱 알고리즘 적용 후의 동작 비교

- 하드웨어 디바운싱 회로(예: 104 세라믹 커패시터 병렬 연결) 구성 여부 검토

- 필요 시 외부 풀업 저항(4.7kΩ 또는 10kΩ) 적용 고려
